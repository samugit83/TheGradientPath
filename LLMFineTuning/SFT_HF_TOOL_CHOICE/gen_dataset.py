import random
import math

TOOLS = [
    "search_web",        # for general searches
    "get_weather",       # fetch weather forecasts
    "plot_data",         # draw charts
    "calculate",         # do math
    "translate_text",    # translate languages
    "schedule_event"     # set up reminders/events
]

# A small set of base templates per tool
BASE_TEMPLATES = {
    "search_web": [
        "Who won the {event} in {year}?",
        "How far is it from {place_a} to {place_b}?",
        "Define the term '{term}'.",
        "Give me a summary of {topic}.",
        "What is the capital of {country}?",
        "List the top 10 {category} in {year}.",
        "When was {person} born?",
        "Find me articles about {topic}.",
        "How do I fix a {problem} on my {device}?",
        "What are the symptoms of {disease}?",
        "What records were set during the {event} in {year}?",
        "Who was the runner-up in the {event} of {year}?",
        "How many kilometers is it from {place_a} to {place_b} by road?",
        "What is the quickest train route between {place_a} and {place_b}?",
        "Explain the origin of the term '{term}'.",
        "Provide synonyms for the term '{term}'.",
        "What are the key points of debate around {topic}?",
        "Outline recent developments in {topic}.",
        "Which continent is {country} located in?",
        "Describe the flag of {country}.",
        "Show the top 10 {category} released in {year}.",
        "Compare the top 10 {category} in {year} to those in the previous year.",
        "What awards has {person} won?",
        "Give a timeline of {person}'s career.",
        "What causes a {problem} on a {device}?",
        "List troubleshooting steps for a {problem} on a {device}.",
        "What complications can arise from {disease}?",
        "Which treatments are available for {disease}?",
        "What was the audience size for the {event} in {year}?",
        "Calculate the driving time from {place_a} to {place_b}.",
        "When was the term '{term}' first used?",
        "Summarize expert opinions on {topic}.",
        "What neighboring countries border {country}?",
        "Rank the top 10 {category} in {year} by popularity.",
        "Where was {person} educated?",
        "What are common signs of a {problem} in a {device}?",
        "How contagious is {disease}?",
        "Provide historical context for the {event} of {year}.",
        "Is there a scenic route from {place_a} to {place_b}?",
        "List preventive measures against {disease}."
    ],
    "get_weather": [
        "What’s the weather like in {city} tomorrow?",
        "Will it rain in {city} on {day}?",
        "Show me the 5-day forecast for {city}.",
        "How hot will it be in {city} next {day_of_week}?",
        "Is it going to snow in {city} this weekend?",
        "What’s the humidity in {city} right now?",
        "Give me the hourly forecast for {city} today.",
        "What’s the UV index in {city} this afternoon?",
        "Will there be thunderstorms in {city} tonight?",
        "What was the high temperature in {city} yesterday?",
        "What will the temperature be in {city} on {day}?",
        "Is {city} expecting strong winds on {day}?",
        "How cold will it get in {city} this {day_of_week} night?",
        "Will it be sunny in {city} this {day_of_week} morning?",
        "Show me the chance of rain in {city} on {day}.",
        "What’s the air quality index in {city} today?",
        "Give me the hourly wind speed forecast for {city} on {day}.",
        "Will {city} experience fog this {day_of_week}?",
        "How high will the UV index be in {city} on {day}?",
        "Is a heatwave expected in {city} next {day_of_week}?",
        "Will {city} have clear skies on {day} night?",
        "What’s the pollen count in {city} today?",
        "When will it stop raining in {city} on {day}?",
        "Show the temperature range in {city} this {day_of_week}.",
        "Will it hail in {city} on {day}?",
        "What was the lowest temperature in {city} yesterday?",
        "Give me the precipitation probability in {city} this {day_of_week} afternoon.",
        "Will there be a weather advisory for {city} on {day}?",
        "How humid will it be in {city} on {day} evening?",
        "Is a cold front moving through {city} this {day_of_week}?",
        "What’s the dew point in {city} right now?",
        "Provide a temperature graph for {city} on {day}.",
        "Will it be safe to travel in {city} on {day} morning due to weather?",
        "Give me the feels-like temperature in {city} this {day_of_week} night.",
        "What time will the rain start in {city} on {day}?",
        "Is {city} under a severe weather warning today?",
        "Will {city} have lightning storms on {day}?",
        "What’s the barometric pressure in {city} right now?",
        "How long will the sunshine last in {city} this {day_of_week}?",
        "Show me the hourly forecast for {city} on {day}."
    ],
    "plot_data": [
        "Plot a line chart of {metric} for the last {n} months.",
        "Show me a bar chart of quarterly {metric}.",
        "Draw a histogram of the distribution of {dataset}.",
        "Graph the relationship between {x} and {y}.",
        "Can you plot {metric} over time?",
        "Create a scatter plot of {var1} vs {var2}.",
        "Show a pie chart of {category_distribution}.",
        "Plot boxplots for {dataset}.",
        "Draw an area chart of {metric}.",
        "Visualize {metric1}, {metric2}, and {metric3} on the same plot.",
        "Generate a line graph showing {metric} for the past {n} years.",
        "Plot a stacked area chart comparing {metric1}, {metric2}, and {metric3} over time.",
        "Show a histogram illustrating the frequency distribution in {dataset}.",
        "Create a box plot of {dataset} to identify potential outliers.",
        "Graph the relationship between {x} and {y} with a fitted trendline.",
        "Render a scatter plot using {var1} on the x-axis and {var2} on the y-axis.",
        "Display a bar chart of monthly averages for {metric}.",
        "Produce a pie chart representing {category_distribution}.",
        "Visualize cumulative {metric} across the last {n} weeks.",
        "Draw side-by-side boxplots for segments of {dataset}.",
        "Chart the correlation between {x} and {y} as a heatmap.",
        "Make a density plot for values in {dataset}.",
        "Plot a multi-line chart of {metric1}, {metric2}, and {metric3} during the previous {n} quarters.",
        "Graph the rolling average of {metric} over the most recent {n} observations.",
        "Generate a bubble chart comparing {var1} and {var2} with bubble size determined by {metric}.",
        "Show a violin plot visualizing distribution of {dataset}.",
        "Plot the cumulative distribution function of {dataset}.",
        "Create a bar chart ranking categories within {category_distribution}.",
        "Display an area chart illustrating growth in {metric}.",
        "Graph the ratio of {x} to {y} over time.",
        "Plot {metric} year-over-year change for the last {n} periods.",
        "Construct a scatter-plot matrix of {var1}, {var2}, and {metric}.",
        "Visualize pairwise relationships between {x}, {y}, and {metric} using scatter plots.",
        "Draw a box-and-whisker plot comparing quartiles in {dataset}.",
        "Plot {metric1}, {metric2}, and {metric3} as separate bar series.",
        "Create a radar chart comparing {metric1}, {metric2}, and {metric3} for each category.",
        "Show a stacked bar chart of {category_distribution} broken down by quarter.",
        "Graph a logarithmic plot of {metric} across {n} intervals.",
        "Display a heatmap of the correlation matrix for features in {dataset}.",
        "Produce a time-series plot overlaying {metric1}, {metric2}, and {metric3}."
    ],
    "calculate": [
        "How many seconds are there in {hours} hours?",
        "What’s {percent}% of {number}?",
        "Convert {amount} {currency_from} to {currency_to}.",
        "What is the square root of {number}?",
        "Calculate {number1} plus {number2}.",
        "What is {number1} times {number2}?",
        "Divide {number1} by {number2}.",
        "What’s the area of a circle with radius {r}?",
        "Compute the compound interest on {principal} at {rate}% for {years} years.",
        "What is {number1} to the power of {number2}?",
        "How many minutes are in {hours} hours?",
        "How many milliseconds are in {hours} hours?",
        "Convert {amount} {currency_from} into {currency_to} at today's rate.",
        "What is {number1} minus {number2}?",
        "Calculate {number1} divided by {number2}, rounded to two decimals.",
        "Find the square of {number}.",
        "What is the cube root of {number}?",
        "Calculate {percent}% of {number}.",
        "Increase {number} by {percent}%.",
        "What is {percent} percent of {number2}?",
        "Raise {number1} to the power of {number2}.",
        "Find the remainder when {number1} is divided by {number2}.",
        "Compute the absolute difference between {number1} and {number2}.",
        "What’s the circumference of a circle with radius {r}?",
        "Compute the area of a circle with radius {r}.",
        "Determine the volume of a sphere with radius {r}.",
        "What is the diameter of a circle if the radius is {r}?",
        "Calculate simple interest on {principal} at {rate}% for {years} years.",
        "How much will {principal} grow at {rate}% compound interest over {years} years?",
        "Determine the total repayment if {principal} accrues {rate}% annually for {years} years.",
        "Convert {amount} from {currency_from} to {currency_to} using yesterday’s rate.",
        "Add {number1}, {number2}, and {number} together.",
        "Subtract {percent}% from {number}.",
        "Compute the geometric mean of {number1} and {number2}.",
        "How many days are in {hours} hours?",
        "Convert {percent}% to a decimal.",
        "What is the logarithm of {number1} base {number2}?",
        "Divide the sum of {number1} and {number2} by {number}.",
        "Calculate the area of a square with side length {number}.",
        "Find the compound annual growth rate for {principal} reaching {number} over {years} years."
    ],
    "translate_text": [
        "Translate '{phrase}' into {language}.",
        "How do you say '{phrase}' in {language}?",
        "Translate this sentence to {language}: '{sentence}'.",
        "Convert '{sentence}' to {language}.",
        "How do you write '{phrase}' in {language} script?",
        "Give me the {language} translation for '{term}'.",
        "Translate '{phrase}' from {lang_from} to {lang_to}.",
        "What’s '{phrase}' in {language}?",
        "Can you translate '{sentence}' into {language}?",
        "Render '{phrase}' in {language}.",
        "Translate '{phrase}' to {language}.",
        "How do I say '{phrase}' in {language}?",
        "Give me the {language} equivalent of '{phrase}'.",
        "Convert the phrase '{phrase}' into {language}.",
        "Render the sentence '{sentence}' in {language}.",
        "Translate the following into {language}: '{sentence}'.",
        "Please translate '{sentence}' from {lang_from} to {lang_to}.",
        "How would '{phrase}' be written in {language} script?",
        "Provide a {language} translation for the term '{term}'.",
        "What does '{phrase}' mean in {language}?",
        "Translate '{phrase}' from {lang_from} into {lang_to}.",
        "How is '{sentence}' expressed in {language}?",
        "Convert this text to {language}: '{sentence}'.",
        "Give me the {lang_to} version of '{phrase}' originally in {lang_from}.",
        "Render '{term}' into {language}.",
        "What’s the {language} word for '{phrase}'?",
        "Translate this into {language}: '{phrase}'.",
        "How do you write '{phrase}' using {language} characters?",
        "Translate the term '{term}' from {lang_from} to {lang_to}.",
        "Please convert '{sentence}' to {language}.",
        "Provide '{phrase}' in {language} translation.",
        "What is '{phrase}' in {language}?",
        "Translate the sentence '{sentence}' into {language}.",
        "How would you translate '{phrase}' into {language}?",
        "Give me a {language} rendition of '{sentence}'.",
        "Render the phrase '{phrase}' from {lang_from} into {lang_to}.",
        "Convert '{term}' to {language}.",
        "Provide a translation for '{phrase}' in {language}.",
        "Translate the sentence from {lang_from} to {lang_to}: '{sentence}'.",
        "What does the {language} version of '{sentence}' look like?"
    ],
    "schedule_event": [
        "Remind me to {action} at {time} on {date}.",
        "Set up a meeting with {group} next {day_of_week}.",
        "Remind me every {frequency} to {action}.",
        "Schedule an appointment with {person} on {date} at {time}.",
        "Create a reminder to {action} tomorrow at {time}.",
        "Make me a recurring reminder every {day_of_week}.",
        "Set a one-time alert for {action} on {date}.",
        "Remind me in {minutes} minutes to {action}.",
        "Plan a call with {person} on {date}.",
        "Schedule {action} for {date} at {time}.",
        "Set a reminder to {action} at {time} on {date}.",
        "Schedule a meeting with {group} at {time} next {day_of_week}.",
        "Remind me every {frequency} to {action} at {time}.",
        "Plan an appointment with {person} on {date}.",
        "Create a recurring reminder to {action} every {day_of_week}.",
        "Alert me in {minutes} minutes to {action}.",
        "Add an event to {action} on {date} at {time}.",
        "Set an alarm at {time} tomorrow to {action}.",
        "Schedule a call with {person} next {day_of_week}.",
        "Organize a meeting with {group} on {date}.",
        "Remind me to {action} at {time} each {day_of_week}.",
        "Set a one-time reminder for {action} on {date} at {time}.",
        "Create an alert every {frequency} at {time} to {action}.",
        "Remind me exactly in {minutes} minutes to {action}.",
        "Book a slot with {person} on {date} at {time}.",
        "Schedule {action} for {date} at {time} with {group}.",
        "Set a weekly reminder every {day_of_week} to {action}.",
        "Plan to {action} with {group} next {day_of_week} at {time}.",
        "Add a recurring event: {action} every {frequency}.",
        "Remind me to {action} next {day_of_week} at {time}.",
        "Set a countdown of {minutes} minutes to {action}.",
        "Create an appointment with {person} every {frequency}.",
        "Schedule a follow-up call with {person} on {date}.",
        "Set an alert to {action} at {time} on {date} with {group}.",
        "Remind me on {date} at {time} to {action}.",
        "Plan a team meeting with {group} every {day_of_week} at {time}.",
        "Arrange {action} with {person} next {day_of_week}.",
        "Schedule a one-off reminder in {minutes} minutes to {action}.",
        "Set a notification to {action} at {time} each {frequency}.",
        "Create a calendar entry: {action} on {date}."
    ],
}

# Pools for placeholder substitution
FILLERS = {
    "event": ["World Cup", "Nobel Prize", "Oscars", "Super Bowl", "Eurovision"],
    "year": [2010, 2014, 2018, 2020, 2022, 2024],
    "place_a": ["New York", "London", "Paris", "Tokyo", "Berlin"],
    "place_b": ["Rome", "Beijing", "Sydney", "Moscow", "Dubai"],
    "term": ["overfitting", "blockchain", "quantum entanglement", "entropy", "relativity"],
    "topic": ["climate change", "machine learning", "covid-19 vaccines", "electric cars", "cryptocurrency"],
    "country": ["France", "Brazil", "Japan", "Canada", "Australia"],
    "category": ["companies by market cap", "best movies", "bestselling books", "most followed celebrities", "largest countries"],
    "person": ["Albert Einstein", "Taylor Swift", "Elon Musk", "Marie Curie", "Serena Williams"],
    "problem": ["printer error", "wifi dropout", "blue screen", "app crash", "battery drain"],
    "device": ["laptop", "smartphone", "printer", "router", "tablet"],
    "disease": ["flu", "diabetes", "hypertension", "asthma", "covid-19"],

    "city": ["Paris", "London", "New York", "Tokyo", "Sydney"],
    "day": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
    "day_of_week": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],

    "metric": ["sales", "revenue", "temperature", "website visits", "user signups"],
    "dataset": ["daily step counts", "transaction values", "survey scores", "CPU usage", "memory utilization"],
    "x": ["temperature", "time", "price", "age", "height"],
    "y": ["humidity", "demand", "cost", "weight", "distance"],
    "category_distribution": ["market share by company", "expense categories", "browser usage", "OS popularity", "age groups"],
    "metric1": ["sales", "profits", "expenses"],
    "metric2": ["revenue", "costs", "margins"],
    "metric3": ["growth", "decline", "stability"],
    "n": [3, 6, 12, 24, 36],

    "hours": [1, 2, 3, 3.5, 4, 5],
    "percent": [5, 12, 17, 25, 33, 50],
    "number": [100, 645, 1024, 256, 999],
    "amount": [50, 100, 250, 500, 1000],
    "currency_from": ["USD", "EUR", "GBP", "JPY", "AUD"],
    "currency_to": ["EUR", "USD", "GBP", "JPY", "CAD"],
    "number1": [12, 7, 45, 256, 99],
    "number2": [3, 8, 16, 4, 11],
    "r": [1, 2, 5, 10, 7],
    "principal": [1000, 5000, 10000, 2000, 750],
    "rate": [3, 5, 7, 10, 12],
    "years": [1, 2, 5, 10, 3],

    "phrase": ["good morning", "thank you", "I love coding", "happy birthday", "let’s go"],
    "language": ["Japanese", "French", "Korean", "Spanish", "German"],
    "lang_from": ["English", "Spanish", "French", "German", "Japanese"],
    "lang_to": ["Japanese", "English", "French", "Korean", "Italian"],

    "action": ["call mom", "pay rent", "send the report", "water the plants", "attend the stand-up"],
    "time": ["6 PM", "09:00", "14:30", "tomorrow morning", "next Friday at 3 PM"],
    "date": ["May 5", "June 1", "July 20", "August 15", "September 30"],
    "group": ["design team", "marketing group", "project stakeholders", "executive board", "product team"],
    "frequency": ["day", "week", "month", "Monday", "Friday"],
    "person": ["dentist", "doctor", "lawyer", "financial advisor", "therapist"],
    "minutes": [5, 10, 15, 30, 45]
}

def generate_raw_examples(nr_examples: int):
    # 1) Expand each tool's templates to have at least 50 distinct items
    templates = {}
    for tool, base_list in BASE_TEMPLATES.items():
        needed = 50
        per = math.ceil(needed / len(base_list))
        expanded = []
        for t in base_list:
            for v in range(1, per+1):
                expanded.append(t)
        templates[tool] = expanded[:needed]

    # 2) Build the examples
    examples = []
    while len(examples) < nr_examples:
        tool = random.choice(TOOLS)
        template = random.choice(templates[tool])
        # fill placeholders
        try:
            q = template.format(**{k: random.choice(v) for k, v in FILLERS.items()})
        except KeyError:
            continue
        examples.append((q, tool))
        
    return examples

